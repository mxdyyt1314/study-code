<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>读取文件实时进度</title>
</head>
<body>
<div>
    <input type="file" id="file1">
    <progress id="pro" value="0"></progress>
</div>
<div>
    <input type="button" id="btnPreview" value="读取">
</div>
<div id="result"></div>


<script>
    var reader = null;
    window.onload = function () {
        if (!FileReader) {
            alert("浏览器暂不支持FileReader,请使用最新版本的chrome浏览器");
            return;
        }
        reader = new FileReader();
        document.getElementById("btnPreview").onclick = function () {
            var files = document.getElementById("file1").files;
            if (!!files && files.length > 0) {
                doFile(files[0]);
            }
        };
    };

    /**
     * 处理文件
     * @param file
     */
    function doFile(file) {
        var pro = document.getElementById("pro");
        pro.max = file.size;
        reader.readAsBinaryString(file);
        reader.onprogress = function (evt) {
            pro.value = evt.loaded;
        }
    }


</script>
</body>
</html>